<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Routes UI</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 32px; background: #F9F9F9; }
        h1 { color:#4a148c; text-align:center; }
        table { width:100%; border-collapse: collapse; margin-top:20px; }
        th, td { border:1px solid #ddd; padding:10px; text-align:left; }
        th { background:#f3e5f5; color:#4a148c; }
        .btn { padding:6px 12px; border:none; border-radius:6px; cursor:pointer; background:#7b1fa2; color:white; text-decoration:none; }
        .btn:hover { background:#6a1b9a; }
        .btn-danger { background:#c62828; }
        .btn-danger:hover { background:#b71c1c; }
    </style>
</head>
<body>
    <h1>:car: Routes</h1>
    <table>
        <tr>
            <th>Source</th>
            <th>Destination</th>
            <th>Estimate</th>
            <th>Action</th>
        </tr>
        {% for r in routes %}
        <tr>
            <td>{{ r.source_name }}<br><small>{{ r.source_address }}</small></td>
            <td>{{ r.destination_name }}<br><small>{{ r.destination_address }}</small></td>
            <td>
                {% if r.current_estimate %}
                    {{ r.current_estimate }} • {{ r.current_distance }}<br>
                    <small>Updated: {{ r.updated_at }}</small>
                {% else %}
                    Error: {{ r.last_error }}
                {% endif %}
            </td>
            <td><a class="btn btn-danger" href="/remove?id={{ r.id }}">Remove</a></td>
        </tr>
        {% endfor %}
    </table>
    <h2>:heavy_plus_sign: Add New Route</h2>
    <form action="/add" method="post">
        <input type="text" name="source_name" placeholder="Source Name" required><br>
        <input type="text" name="source_address" placeholder="Source Address" required><br>
        <input type="text" name="destination_name" placeholder="Destination Name" required><br>
        <input type="text" name="destination_address" placeholder="Destination Address" required><br>
        <button class="btn" type="submit">Add Route</button>
    </form>
    <script>
        // تحديث الصفحة كل 5 دقائق
        setInterval(() => { window.location.reload(); }, 300000);
    </script>
</body>
</html>